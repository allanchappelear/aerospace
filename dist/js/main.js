function Terrain(t){t=t||{},this.terrain=document.createElement("canvas"),this.terCtx=this.terrain.getContext("2d"),this.scrollDelay=t.scrollDelay||90,this.lastScroll=(new Date).getTime(),this.terrain.width=width,this.terrain.height=height,this.fillStyle=t.fillStyle||"#191D4C",this.mHeight=t.mHeight||height,this.points=[];var i=t.displacement||140,e=Math.pow(2,Math.ceil(Math.log(width)/Math.log(2)));this.points[0]=this.mHeight,this.points[e]=this.points[0];for(var h=1;h<e;h*=2){for(var s=e/h/2;s<e;s+=e/h)this.points[s]=(this.points[s-e/h/2]+this.points[s+e/h/2])/2+Math.floor(Math.random()*-i+i);i*=.6}document.body.appendChild(this.terrain)}function Star(t){this.size=2*Math.random(),this.speed=.05*Math.random(),this.x=t.x,this.y=t.y}function ShootingStar(){this.reset()}function animate(){bgCtx.fillStyle="#110E19",bgCtx.fillRect(0,0,width,height),bgCtx.fillStyle="#ffffff",bgCtx.strokeStyle="#ffffff";for(var t=entities.length;t--;)entities[t].update();requestAnimationFrame(animate)}var scene=document.getElementById("scene"),parallax=new Parallax(scene);$.fn.isInViewport=function(){var t=$(this).offset().top,i=t+$(this).outerHeight(),e=$(window).scrollTop(),h=e+$(window).height();return i>e&&t<h-300},$("#header1").hide(),$("#header2").hide(),jQuery(document).ready(function(t){function i(i){var e=t(window).scrollTop(),h=e+t(window).height(),s=t(i).offset().top;return s+t(i).height()<=h+200&&s>=e}t("#header1").fadeIn(),t(window).scroll(function(){var e=t(window).scrollTop(),h=t(window).height();t(".animate").each(function(){!0===i(this)&&t(this).addClass("in")}),t("#header1").css({transform:"translate3d(0%, -"+e/300+"%, 0) scale("+(300+e/5)/300+")","-webkit-filter":"blur("+e/200+"px)",filter:"blur("+e/200+"px)",opacity:150/e}),e>h-h/2+200?(t("#header2").fadeIn(),t("#header1").fadeOut()):(t("#header2").fadeOut(),t("#header1").fadeIn())}),t(window).on("resize scroll",function(){t("#pq1").isInViewport()&&t("#pq1").addClass("visible"),t("#pq2").isInViewport()&&t("#pq2").addClass("visible"),t("#video1").isInViewport()?(t("audio#audio1")[0].play(),t("#video1").addClass("visible")):t("audio#audio1")[0].pause()});var e=document.getElementById("debris-years").getContext("2d");new Chart(e,{type:"line",data:{labels:["1960","1970","1980","1990","2000","2010"],datasets:[{label:"Accumulation of All Objects in Orbit",data:[0,1e3,5e3,7e3,9500,2e4],backgroundColor:"#e0195e",borderColor:"#e0195e"}]},options:{}})}),function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};window.requestAnimationFrame=t}();var background=document.getElementById("bgCanvas"),bgCtx=background.getContext("2d"),width=window.innerWidth,height=document.body.offsetHeight;height<400&&(height=400),background.width=width,background.height=height,Terrain.prototype.update=function(){this.terCtx.clearRect(0,0,width,height),this.terCtx.fillStyle=this.fillStyle,(new Date).getTime()>this.lastScroll+this.scrollDelay&&(this.lastScroll=(new Date).getTime(),this.points.push(this.points.shift())),this.terCtx.beginPath();for(var t=0;t<=width;t++)0===t?this.terCtx.moveTo(0,this.points[0]):void 0!==this.points[t]&&this.terCtx.lineTo(t,this.points[t]);this.terCtx.lineTo(width,this.terrain.height),this.terCtx.lineTo(0,this.terrain.height),this.terCtx.lineTo(0,this.points[0]),this.terCtx.fill()},bgCtx.fillStyle="#05004c",bgCtx.fillRect(0,0,width,height),Star.prototype.reset=function(){this.size=2*Math.random(),this.speed=.05*Math.random(),this.x=width,this.y=Math.random()*height},Star.prototype.update=function(){this.x-=this.speed,this.x<0?this.reset():bgCtx.fillRect(this.x,this.y,this.size,this.size)},ShootingStar.prototype.reset=function(){this.x=Math.random()*width,this.y=0,this.len=80*Math.random()+10,this.speed=10*Math.random()+6,this.size=1*Math.random()+.1,this.waitTime=(new Date).getTime()+3e3*Math.random()+500,this.active=!1},ShootingStar.prototype.update=function(){this.active?(this.x-=this.speed,this.y+=this.speed,this.x<0||this.y>=height?this.reset():(bgCtx.lineWidth=this.size,bgCtx.beginPath(),bgCtx.moveTo(this.x,this.y),bgCtx.lineTo(this.x+this.len,this.y-this.len),bgCtx.stroke())):this.waitTime<(new Date).getTime()&&(this.active=!0)};for(var entities=[],i=0;i<height;i++)entities.push(new Star({x:Math.random()*width,y:Math.random()*height}));entities.push(new ShootingStar),entities.push(new ShootingStar),entities.push(new Terrain({mHeight:height/2-120})),entities.push(new Terrain({displacement:120,scrollDelay:50,fillStyle:"rgb(17,20,40)",mHeight:height/2-60})),entities.push(new Terrain({displacement:100,scrollDelay:20,fillStyle:"rgb(10,10,5)",mHeight:height/2})),animate();